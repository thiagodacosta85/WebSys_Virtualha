theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00C19A"))
ocupacaoTerritorial %>%
filter(Quantidade != 0) %>%
ggplot(aes(NOME, Quantidade, fill = Tipo, label = Quantidade, group = Tipo)) +
geom_bar(stat = "identity", position = "dodge") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Quantidade",
title = "Ocupação territorial",
subtitle = "* ocultadas as localidades sem residências construídas") +
geom_label(size = 3, fill="gray95", angle = 90, position = position_dodge(width=1))
empregabilidade %>%
ggplot(aes(NOME, Quantidade, fill = Condição, label= Quantidade)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title="Empregabilidade",
subtitle = NULL,
x="Localidade",
y= "Relação trabalhadores e vagas") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00C19A"))
ocupacaoTerritorial %>%
filter(Quantidade != 0) %>%
ggplot(aes(NOME, Quantidade, fill = Tipo, label = Quantidade, group = Tipo)) +
geom_bar(stat = "identity", position = "dodge") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Quantidade",
title = "Ocupação territorial",
subtitle = "* ocultadas as localidades sem residências construídas") +
geom_label(size = 3, fill="gray95", angle = 90, position = position_dodge(width=1))
empregabilidade %>%
ggplot(aes(NOME, Quantidade, fill = Condição, label= Quantidade)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title="Empregabilidade",
subtitle = NULL,
x="Localidade",
y= "Relação trabalhadores e vagas") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00BFC4"))
ocupacaoTerritorial %>%
filter(Quantidade != 0) %>%
ggplot(aes(NOME, Quantidade, fill = Tipo, label = Quantidade, group = Tipo)) +
geom_bar(stat = "identity", position = "dodge") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Quantidade",
title = "Ocupação territorial",
subtitle = "* ocultadas as localidades sem residências construídas") +
geom_label(size = 3, fill="gray95", angle = 90, position = position_dodge(width=1))
empregabilidade %>%
ggplot(aes(NOME, Quantidade, fill = Condição, label= Quantidade)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title="Empregabilidade",
subtitle = NULL,
x="Localidade",
y= "Relação trabalhadores e vagas") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00BFC4"))
empregabilidade %>%
ggplot(aes(NOME, Quantidade, fill = Condição, label= Quantidade)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title="Empregabilidade",
subtitle = NULL,
x="Localidade",
y= "Relação trabalhadores e vagas") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00BFC4"))
empregabilidade %>%
ggplot(aes(NOME, Quantidade, fill = Condição, label= Quantidade)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title="Empregabilidade",
subtitle = NULL,
x="Localidade",
y= "Relação trabalhadores e vagas") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00BFC4")) +
geom_label(size = 3, fill="gray95", alpha = 1)
empregabilidade %>%
ggplot(aes(NOME, Quantidade, fill = Condição, label= Quantidade)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title="Empregabilidade",
subtitle = NULL,
x="Localidade",
y= "Relação trabalhadores e vagas") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00BFC4")) +
geom_label(size = 3, fill="gray95", alpha = 1, angle = 90)
empregabilidade %>%
ggplot(aes(NOME, Quantidade, fill = Condição, label= Quantidade, group = Condição)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title="Empregabilidade",
subtitle = NULL,
x="Localidade",
y= "Relação trabalhadores e vagas") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00BFC4")) +
geom_label(size = 3, fill="gray95", alpha = 1, angle = 90)
empregabilidade %>%
ggplot(aes(NOME, Quantidade, fill = Condição, label= Quantidade, group = Condição)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title="Empregabilidade",
subtitle = NULL,
x="Localidade",
y= "Relação trabalhadores e vagas") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00BFC4")) +
geom_label(size = 3, fill="gray95", alpha = 1, position = position_dodge(width=1), angle = 90)
atividade %>%
ggplot(aes(y = ATIV, x = n, fill = ATIV, label = n)) +
geom_bar(stat = "identity") +
labs(title="Insidência de localidades por atividade",
subtitle = NULL,
x=NULL,
y= NULL) +
coord_flip() +
geom_label(size = 4, fill="gray95", alpha = 1)
# <barplotDistribuicaoPopulacional>
ggplot(localidades, aes(x = NOME, y = POPULACAO, fill = ZONA, label = POPULACAO)) +
geom_bar(stat = 'identity') +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "População",
title = "Distribuição Populacional",
subtitle = NULL) +
geom_label(size = 3, fill="gray95")
# <barplotDistribuicaoPopulacionalPorGrupo>
localGrupos %>%
filter(POPULACAO > 0) %>%
ggplot(aes(x = NOME, y = Quantidade, fill = Grupo, label = Quantidade, group = Grupo)) +
geom_bar(stat = 'identity', position = "dodge") +
geom_label(size = 3, fill = "white", position = position_dodge(width = 1), alpha = 1, angle = 90) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "População",
title = "Distribuição Populacional",
subtitle = "* Excluindo os locais não habitados")
# <barplotValorMedioTerreno>
ggplot(localidades, aes(x = NOME, y = VALOR_MED_TERRENO, fill = ZONA, label = VALOR_MED_TERRENO)) +
geom_bar(stat = 'identity') +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Valor Médio",
title = "Valor médio dos terrenos por localidade",
subtitle = NULL) +
geom_label(size = 3, fill="gray95")
ocupacaoTerritorial %>%
filter(Quantidade != 0) %>%
ggplot(aes(NOME, Quantidade, fill = Tipo, label = Quantidade, group = Tipo)) +
geom_bar(stat = "identity", position = "dodge") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Quantidade",
title = "Ocupação territorial",
subtitle = "* ocultadas as localidades sem residências construídas") +
geom_label(size = 3, fill="gray95", angle = 90, position = position_dodge(width=1))
ocupacaoTerritorial %>%
filter(Quantidade != 0) %>%
ggplot(aes(NOME, Quantidade, fill = Tipo, label = Quantidade, group = Tipo)) +
geom_bar(stat = "identity", position = "dodge") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Quantidade",
title = "Ocupação territorial",
subtitle = "* ocultadas as localidades sem residências construídas") +
geom_label(size = 3, fill="gray95", angle = 90, position = position_dodge(width=1))
# <barplotOcupacaoTerritorial>
ocupacaoTerritorial %>%
filter(Quantidade != 0) %>%
ggplot(aes(NOME, Quantidade, fill = Tipo, label = Quantidade, group = Tipo)) +
geom_bar(stat = "identity", position = "dodge") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Quantidade",
title = "Ocupação territorial",
subtitle = "* ocultadas as localidades sem residências construídas") +
geom_label(size = 3, fill="gray95", angle = 90, position = position_dodge(width=1))
# <barplotLocalidadesPorZona>
localidades %>%
group_by(ZONA) %>%
summarise(
contador = n()
) %>%
ggplot(aes(ZONA,contador,label=contador, fill=ZONA))+
geom_bar(stat = "identity")+
labs(title="Distribuição das localidades por Zona",
subtitle = NULL,
x="Zona",
y= NULL)+
theme(axis.text.y = element_blank()) +
theme(axis.ticks.y.left = element_blank()) +
geom_label(size = 3, fill="gray95", alpha = 1)
setwd("C:/llpDigital/WebSys_Virtualha/dataAnalysis")
if(!require(RMySQL))
install.packages("RMySQL")
library(RMySQL)
if(!require(tidyverse))
install.packages("tidyverse")
library(tidyverse)
database <- dbConnect(MySQL(), user='llpdigital', password='password',
dbname='virtualha', host='192.168.0.163')
dbListTables(database)
dbListFields(database, 'localidades')
table  <- dbSendQuery(database, "select * from localidades")
localidades  <-  fetch(table, n=-1)
localidades$DATA_FUND <- as.Date(localidades$DATA_FUND, format = "%Y-%m-%d")
str(localidades)
localidades %>% select(NOME, ZONA, POPULACAO, ATIV)
localGruposRes <- select(localidades, NOME, ZONA, POPULACAO, CRIANCAS, ADOLESC,
JOVENS_ADUL, ADULTOS, IDOSOS)
localGrupos  <-  pivot_longer(localGruposRes,c(
CRIANCAS, ADOLESC, JOVENS_ADUL, ADULTOS, IDOSOS),
names_to = "Grupo",
values_to = "Quantidade")
rm(localGruposRes)
view(localGrupos)
empregabilidadeRes <- localidades %>%
select(NOME, ZONA, TRABALHADORES_EFET, VAGAS_DISP)
empregabilidade <- pivot_longer(empregabilidadeRes, c(TRABALHADORES_EFET, VAGAS_DISP),
names_to = "Condição",
values_to = "Quantidade")
rm(empregabilidadeRes)
view(empregabilidade)
distribAtividade <- localidades %>%
select(NOME, ATIV)
view(distribAtividade)
atividade  <-  distribAtividade %>%
group_by(ATIV) %>%
summarise(
n = n()
)
ocupacaoTerritorial <- localidades %>%
select(NOME, RESIDENCIAS_CONST, RESIDENCIAS_POS)
ocupacaoTerritorial <- pivot_longer(ocupacaoTerritorial, c(RESIDENCIAS_CONST, RESIDENCIAS_POS),
names_to = "Tipo",
values_to = "Quantidade")
# <barplotDistribuicaoPopulacional>
ggplot(localidades, aes(x = NOME, y = POPULACAO, fill = ZONA, label = POPULACAO)) +
geom_bar(stat = 'identity') +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "População",
title = "Distribuição Populacional",
subtitle = NULL) +
geom_label(size = 3, fill="gray95")
# <barplotDistribuicaoPopulacionalPorGrupo>
localGrupos %>%
filter(POPULACAO > 0) %>%
ggplot(aes(x = NOME, y = Quantidade, fill = Grupo, label = Quantidade, group = Grupo)) +
geom_bar(stat = 'identity', position = "dodge") +
geom_label(size = 3, fill = "white", position = position_dodge(width = 1), alpha = 1, angle = 90) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "População",
title = "Distribuição Populacional",
subtitle = "* Excluindo os locais não habitados")
# <barplotDistribuicaoPopulacionalPorGrupo>
localGrupos %>%
filter(POPULACAO > 0) %>%
ggplot(aes(x = NOME, y = Quantidade, fill = Grupo, label = Quantidade, group = Grupo)) +
geom_bar(stat = 'identity', position = "dodge") +
geom_label(size = 3, fill = "white", position = position_dodge(width = 1), alpha = 1, angle = 90) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "População",
title = "Distribuição populacional por grupo de indivíduos",
subtitle = "* Excluindo os locais não habitados")
# <barplotDistribuicaoPopulacionalPorGrupo>
localGrupos %>%
filter(POPULACAO > 0) %>%
ggplot(aes(x = NOME, y = Quantidade, fill = Grupo, label = Quantidade, group = Grupo)) +
geom_bar(stat = 'identity', position = "dodge") +
geom_label(size = 3, fill = "white", position = position_dodge(width = 1), alpha = 1, angle = 90) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "População",
title = "Distribuição populacional por grupo de indivíduos",
subtitle = "* Excluindo os locais não habitados")
# <barplotLocalidadesPorZona>
localidades %>%
group_by(ZONA) %>%
summarise(
contador = n()
) %>%
ggplot(aes(ZONA,contador,label=contador, fill=ZONA))+
geom_bar(stat = "identity")+
labs(title="Distribuição das localidades por Zona",
subtitle = NULL,
x="Zona",
y= NULL)+
theme(axis.text.y = element_blank()) +
theme(axis.ticks.y.left = element_blank()) +
geom_label(size = 3, fill="gray95", alpha = 1)
# <barplotValorMedioTerreno>
ggplot(localidades, aes(x = NOME, y = VALOR_MED_TERRENO, fill = ZONA, label = VALOR_MED_TERRENO)) +
geom_bar(stat = 'identity') +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Valor Médio",
title = "Valor médio dos terrenos por localidade",
subtitle = NULL) +
geom_label(size = 3, fill="gray95")
# <barplotValorMedioTerreno>
ggplot(localidades, aes(x = NOME, y = VALOR_MED_TERRENO, fill = ZONA, label = VALOR_MED_TERRENO)) +
geom_bar(stat = 'identity') +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Valor Médio",
title = "Valor médio dos terrenos por localidade",
subtitle = NULL) +
geom_label(size = 3, fill="gray95")
# <barplotOcupacaoTerritorial>
ocupacaoTerritorial %>%
filter(Quantidade != 0) %>%
ggplot(aes(NOME, Quantidade, fill = Tipo, label = Quantidade, group = Tipo)) +
geom_bar(stat = "identity", position = "dodge") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Quantidade",
title = "Ocupação territorial",
subtitle = "* ocultadas as localidades sem residências construídas") +
geom_label(size = 3, fill="gray95", angle = 90, position = position_dodge(width=1))
# <barplotOcupacaoTerritorial>
ocupacaoTerritorial %>%
filter(Quantidade != 0) %>%
ggplot(aes(NOME, Quantidade, fill = Tipo, label = Quantidade, group = Tipo)) +
geom_bar(stat = "identity", position = "dodge") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Quantidade",
title = "Ocupação territorial",
subtitle = "* ocultadas as localidades sem residências construídas") +
geom_label(size = 3, fill="gray95", angle = 90, position = position_dodge(width=1))
# <barplotValorMedioTerreno>
ggplot(localidades, aes(x = NOME, y = VALOR_MED_TERRENO, fill = ZONA, label = VALOR_MED_TERRENO)) +
geom_bar(stat = 'identity') +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Valor Médio",
title = "Valor médio dos terrenos por localidade",
subtitle = NULL) +
geom_label(size = 3, fill="gray95")
# <barplotOcupacaoTerritorial>
ocupacaoTerritorial %>%
filter(Quantidade != 0) %>%
ggplot(aes(NOME, Quantidade, fill = Tipo, label = Quantidade, group = Tipo)) +
geom_bar(stat = "identity", position = "dodge") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1)) +
labs(x = "Localidade",
y = "Quantidade",
title = "Ocupação territorial",
subtitle = "* ocultadas as localidades sem residências construídas") +
geom_label(size = 3, fill="gray95", angle = 90, position = position_dodge(width=1))
empregabilidade %>%
ggplot(aes(NOME, Quantidade, fill = Condição, label= Quantidade, group = Condição)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title="Empregabilidade",
subtitle = NULL,
x="Localidade",
y= "Relação trabalhadores e vagas") +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1),
axis.text.y = element_text(angle = 0, vjust = 0.5, hjust = 1))+
scale_fill_manual(values = c("#F8766D","#00BFC4")) +
geom_label(size = 3, fill="gray95", alpha = 1, position = position_dodge(width=1), angle = 90)
atividade %>%
ggplot(aes(y = ATIV, x = n, fill = ATIV, label = n)) +
geom_bar(stat = "identity") +
labs(title="Insidência de localidades por atividade",
subtitle = NULL,
x=NULL,
y= NULL) +
coord_flip() +
geom_label(size = 4, fill="gray95", alpha = 1)
head(localidades)
View(localidades)
View(localidades)
localidades %>%
select(NOME, ZONA, POPULACAO, ATIV)
localidades %>%
count(NOME)
localidades %>%
sum(NOME)
localidades %>%
unique(NOME)
```{r localidades}
localidades %>%
unique(NOME)
localidades %>%
SELECT c(NOME)
localidades %>%
select(NOME)
localidades %>%
select(NOME)
localidades <- C(
localidades %>%
select(NOME))
localidades <- C(
localidades %>%
select(NOME))
localidades <-
localidades %>%
select(NOME)
localides <- localides
localides <- c(localides)
localidades <-
localidades %>%
select(NOME)
localidades <-
localidades %>%
select(NOME) %>%
localidades <- c(localides)
localidades <-
localidades %>%
select(NOME) %>%
localidades <- c(localidades)
localidades <-
localidades %>%
select(NOME) %>%
c(localidades)
print(localidades)
View(localidades)
View(localidades)
View(localidades)
View(localidades)
table  <- dbSendQuery(database, "select * from localidades")
localidades  <-  fetch(table, n=-1)
localidades$DATA_FUND <- as.Date(localidades$DATA_FUND, format = "%Y-%m-%d")
str(localidades)
View(localidades)
listaLocalidades <-
localidades %>%
select(NOME) %>%
c(listaLocalidades)
listaLocalidades <-
localidades %>%
select(NOME) %>%
c(listaLocalidades)
localidades %>%
select(NOME)
localidades %>%
select(NOME)
localidades %>%
sum(POPULACAO)
View(localidades)
View(localidades)
localidades %>%
sum(POPULACAO)
localidades %>%
sum(POPULACAO)
sum(localidades$POPULACAO)
localidades %>%
SELECT (NOME)
localidades %>%
SELECT (NOME)
localidades %>%
select(NOME, ZONA, POPULACAO, ATIV)
plot(pressure)
localidades %>%
sum(POPULACAO)
if(!require(tidyverse))
install.packages("tidyverse")
library(tidyverse)
if(!require(tidyverse))
install.packages("tidyverse")
library(tidyverse)
```{r localidades}
localidades %>%
select(NOME, ZONA, POPULACAO, ATIV)
```{r localidades, echo =FALSE}
localidades %>%
sum(POPULACAO)
localidades %>%
sum(NOME)
sum(localidades$NOME)
sum(localidades$POPULACAO)
localidades %>%
sum(POPULACAO)
localidades %>%
sum(POPULACAO)
sum(localidades$POPULACAO)
localidades %>%
select(NOME, ZONA, POPULACAO, ATIV)
```{r localidades, echo =FALSE}
sum(localidades$POPULACAO)
